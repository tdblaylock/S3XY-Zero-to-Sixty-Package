%--------------------------------------------------------------------------
% Description
%--------------------------------------------------------------------------
% Not taking slip into account or terrain
% Model is visualized on flat asphault
% Using DC Brush Motor instead of the more electronically complex
% AC 4 pole motor in traditional tesla vehicles
%--------------------------------------------------------------------------
% General Variables
%--------------------------------------------------------------------------

kmh = 96.57;
mps2mph = 1/1.609;
mps2kmh = 3.6;
kmh2mps = 1/3.6;
Max_Torque_Nm = 601;
g = 9.81; %Gravity constant
Cr = 0.02; %Rolling resistance
rho = 1.225; %Air density @ sea level

%--------------------------------------------------------------------------
% DC Brushed Motor
%--------------------------------------------------------------------------

Kt = 0.25; % Motor Torque Constant
Ke = 0.12; % Emf Constant
L = 493*10^-9; %Inductance
R = 5.3*10^-3; %Resistance
Max_Voltage = 350; %Max Voltage output of Lithium Battery


%--------------------------------------------------------------------------
% TESLA MODEL S
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
% Aerodynamic Drag
%--------------------------------------------------------------------------
Cd_s = 0.24; %Drag coefficient
S_s = 2.41; %Frontal Area
D_s = 0.5*(rho*Cd_s*S_s);
E_s = 1.2; %Vehicle Efficiency
%--------------------------------------------------------------------------
% Traction Force
%--------------------------------------------------------------------------

Gr_s = 9.73; %Gear Ratio
Wr_s = 0.24; %Average Wheel Radius m
Ff_Ns = Gr_s/Wr_s; %Resultant Force


%--------------------------------------------------------------------------
% Rolling Resistance
%--------------------------------------------------------------------------

mass_s = 2241.2; %Vehicle Mass kg
Fr_Ns = mass_s*Cr*g; %Rolling Force


%--------------------------------------------------------------------------
% TESLA MODEL X
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
% Aerodynamic Drag
%--------------------------------------------------------------------------

Cd_x = 0.24; %Drag coefficient
S_x = 2.86; %Frontal Area m^2
D_x = 0.5*(rho*Cd_x*S_x);
E_x = 1.2; %Vehicle Efficiency

%--------------------------------------------------------------------------
% Traction Force
%--------------------------------------------------------------------------

Gr_x = 9.73; %Gear Ratio
Wr_x = 0.254; %Average Wheel Radius
Ff_Nx = Gr_x/Wr_x; %Resultant Force

%--------------------------------------------------------------------------
% Rolling Resistance
%--------------------------------------------------------------------------

mass_x = 2508.819;
Fr_Nx = mass_x*Cr*g;


%--------------------------------------------------------------------------
% TESLA MODEL Y
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
% Aerodynamic Drag
%--------------------------------------------------------------------------
Cd_y = 0.24; %Drag coefficient
S_y = 2.64; %Frontal Area
D_y = 0.5*(rho*Cd_y*S_y);
E_y = 1.2; %Vehicle Efficiency

%--------------------------------------------------------------------------
% Traction Force
%--------------------------------------------------------------------------

Gr_y = 9; %Gear Ratio
Wr_y = 0.2667; %Average Wheel Radius
Ff_Ny = Gr_y/Wr_y; %Resultant Force

%--------------------------------------------------------------------------
% Rolling Resistance
%--------------------------------------------------------------------------

mass_y = 2003.064;
Fr_Ny = mass_y*Cr*g;


%--------------------------------------------------------------------------
% MODEL 3
%--------------------------------------------------------------------------
%--------------------------------------------------------------------------
% Aerodynamic Drag
%--------------------------------------------------------------------------

Cd_3 = 0.24; %Drag coefficient
S_3 = 2.34; %Frontal Area
D_3 = 0.5*(rho*Cd_3*S_3);
E_3 = 1.2; %Vehicle Efficiency

%--------------------------------------------------------------------------
% Traction Force
%--------------------------------------------------------------------------

Wr_3 = 0.254;
Gr_3 = 9; 
Ff_N3 = Gr_3/Wr_3;
 

%--------------------------------------------------------------------------
% Rolling Resistance
%--------------------------------------------------------------------------

mass_3 = 1830.7;
Fr_N3 = mass_3*Cr*g;